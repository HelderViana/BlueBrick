<HTML>
<HEAD>
<META NAME="keywords" CONTENT="BlueBrick, Help">
<META NAME="description" CONTENT="The reference documentation for BlueBrick.">
<META NAME="author" CONTENT="Alban Nanty">
<LINK REL=StyleSheet HREF="../BlueBrick.css" TYPE="text/css" MEDIA=screen>
<Title>LDraw Konvertierungsdatei</Title>
</HEAD>
<BODY>
<H1>LDraw Konvertierungsdatei</H1>

<H2>Zweck</H2>
<P>Mit BlueBrick können Gleispläne im LDRAW-Format gespeichert und geladen werden. Da jedoch die LDRAW-Dateien einiger Teile nicht den gleichen Nullpunkt wie die BlueBrick-Dateien dieser Teile haben, müssen beim Speichern im LDRAW-Format ggf. Position und Orientierung umgerechnet werden.</P>
<P>Zu diesem Zweck benutzt BlueBrick eine Konfigurationsdatei, "LDrawPartRemap.txt" genannt. Diese befindet sich im Ordner "config" des Installationsordners.</P>

<DIV CLASS="TechNote">
&lt;BlueBrick install folder&gt;\config\LDrawPartRemap.txt
</DIV>

<P> Jedem Teil in dieser Datei ist genau eine Zeile für die LDRAW-Umrechnung zugeordnet. Ist für ein Teil keine entsprechende Zeile in dieser Datei vorhanden, obwohl eine Umrechnung nötig wäre, so stimmen nach der Speicherung im LDRAW-Format Position und / oder Orientierung dieses Teils nicht.</P>

<P>Diese Datei wird nur beim Programmstart von BlueBrick geladen. Nach jeder Änderung dieser Datei muss BlueBrick also geschlossen und neu gestartet werden, damit die Änderungen wirksam sind.</P>

<P><FONT CLASS="Important">Hinweis: Sehr wahrscheinlich wird diese Konfigurationsdatei mit dem Update auf eine neue BlueBrick Version entfallen. Die Daten zur Umwandlung nach LDRAW werden dann Bestandteil der XML-Datei des jeweiligen Teils sein.</FONT></P>

<H2>Wann muss diese Konfigurationsdatei bearbeitet werden?</H2>
<P>Wenn BlueBrick um weitere Sets erweitert wird, ist eine Bearbeitung der Konfigurationsdatei in den meisten Fällen nicht erforderlich. Da in LDRAW nur Teile und sehr wenig Sets vorhanden sind, können die in einem Gleisplan eingesetzten Sets sowieso nicht von LDRAW geladen werden.</P>

<P>Soll ein weiteres Teil dem Teileumfang von BlueBrick hinzugefügt werden, muss die Konfigurationsdatei nur dann geändert werden, wenn der Nullpunkt des Teils in BlueBrick anders ist als der Nullpunkt dieses Teils in LDRAW.</P>

<H2>Dateiformat</H2>
<P>Die "LDrawPartRemap.txt" Konfigurationsdatei ist eine einfache Textdatei. Jede leere Zeile wird ignoriert. In einer Zeile wird zudem alles hinter einem Semikolon ignoriert. Nach einem Semikolon kann man also Kommentare einfügen. Wie oben bereits erwähnt, ist in der Kofigurationsdatei für jedes Teil eine Zeile vorgesehen. Jede Zeile muss folgendem Format entsprechen:</P>
<BR>

<TABLE CLASS="XMLDescription">
<TR>
	<TD CLASS="Tilte">Syntax:</TD>
	<TD CLASS="XMLCode">&lt;Teilenummer&gt;=&lt;Winkel&gt; &lt;x&gt; &lt;y&gt; &lt;z&gt; [&lt;Austauschteil beim Laden.Farbe&gt; &lt;Austauschteil beim Speichern&gt;]</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;Teilenummer&gt;</TD>
	<TD>Die LDRAW Teilenummer (entspricht der BlueBrick Teilenummer ohne Farbcode)</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;Winkel&gt;</TD>
	<TD>Der Winkelunterschied in Grad zwischen LDRAW und BlueBrick um die Y-Achse (UP-Achse in LDRAW)</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;x&gt;</TD>
	<TD>x Koordinate in LDRAW in LDU (LDRAW-Einheiten)</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;y&gt;</TD>
	<TD>y Koordinate in LDRAW, entspricht der UP-Achse in LDRAW, Koordinaten in LDU (LDRAW-Einheiten)</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;z&gt;</TD>
	<TD>z Koordinate in LDRAW in LDU (LDRAW-Einheiten)</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;Austauschteil beim Laden.Farbe&gt;</TD>
	<TD>Beim Laden soll das Teil durch das Teil mit dieser Teilnummer und dieser Farbe ersetzt werden. "Skip" eintragen, wenn das Teil beim Laden übersprungen werden soll.</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;Austauschteil beim Speichern&gt;</TD>
	<TD>Beim Speichern soll das Teil durch diese Teilnummer ersetzt werden, weil z.B. das Teil in LDRAW noch nicht vorhanden ist.</TD>
</TR>  
</TABLE>
<P>Hinweis: Die Parameter können sowohl durch Leerzeichen als auch durch Tabulator voneinander getrennt werden. Die beiden letzten Parameter (Austauschteil beim Laden bzw. Speichern) sind optional und müssen nicht angegeben werden.</P>

<P>Verschiebung und Drehung werden in folgender Reihenfolge ausgeführt:</P>
<UL>
	<LI><B>Von BlueBrick nach LDRAW:</B> Zuerst die Verschiebung, dann die Drehung</LI>
	<LI><B>Von LDRAW nach BlueBrick:</B> Zuerst die Drehung, dann die Verschiebung</LI>
</UL>

<P>Hier als Beispiel eine 12V Kurvenschiene in grau:</P>
<DIV CLASS="TechNote">
3241C01=11.25	-12.67	-24		13.38	767.8				;curve track (grey)
</DIV>

</BODY>
</HTML>
