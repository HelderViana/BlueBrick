<HTML>
<HEAD>
<META NAME="keywords" CONTENT="BlueBrick, Help">
<META NAME="description" CONTENT="The reference documentation for BlueBrick.">
<META NAME="author" CONTENT="Alban Nanty">
<LINK REL=StyleSheet HREF="../BlueBrick.css" TYPE="text/css" MEDIA=screen>
<Title>LDraw Remaping File</Title>
</HEAD>
<BODY>
<H1>LDraw Remaping File</H1>

<H2>Purpose</H2>
<P>BlueBrick can save and load files in LDRAW format. But because the origin of the parts in LDRAW files is not always the same than the origin of the parts in the BlueBrick library, BlueBrick need to apply some transformation on the position and orientation of the parts when saving or loading a LDRAW format file.</P>
<P>For this purpose, BlueBrick use a configuration file named "LDrawPartRemap.txt" which is located in the "config" folder of the installation folder. The file contains one conversion line per part. If there is no conversion line for a part that needs one, you will notice that the part is not at the same place and/or orientation, when opening the LDraw file with BlueBrick and with your LDraw software.</P>

<DIV CLASS="TechNote">
&lt;BlueBrick install folder&gt;\config\LDrawPartRemap.txt
</DIV>

<P>Note that this file is only parse one time by BlueBrick, so each time you modify it, you must close BlueBrick and relaunch it to take effect.</P>

<P><FONT CLASS="Important">Note: It is very probable that this file will disapear in a furtur version of BlueBrick, and the remap information will move to the part description XML file.</FONT></P>

<H2>When do you need to edit this file?</H2>
<P>If you are extending your library with sets, you probably don't need to modify this file because the LDRAW library mostly contains parts and very few models. So the sets will not be loadable anyway by your LDraw software.</P>

<P>Moreover if you are extending your library with a part, you only need to modify this file if the origin of the part is different in BlueBrick and LDraw.</P>

<H2>File Format</H2>
<P>The "LDrawPartRemap.txt" configuration file is a plain text file. Every blanck line or line that start with a semicolon ";" are ignored. In fact everything after a semicolon is ignored until the end of the line. The semicolon lets you add some comment in the file. The part conversion is written on one line (one line per part) with the following format:</P>
<BR>

<TABLE CLASS="XMLDescription">
<TR>
	<TD CLASS="Tilte">Syntax:</TD>
	<TD CLASS="XMLCode">&lt;PartNumber&gt;=&lt;angle&gt; &lt;x&gt; &lt;y&gt; &lt;z&gt; [&lt;sleeper.color&gt; &lt;UsePartInstead&gt;]</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;PartNumber&gt;</TD>
	<TD>the LDRAW part number (which is the same as the BlueBrick part number without the color code)</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;angle&gt;</TD>
	<TD>the difference of angle between the two systems along the UP axis (in Degree)</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;x&gt;</TD>
	<TD>x coordinate in LDRAW (in LDU)</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;y&gt;</TD>
	<TD>y coordinate in LDRAW, so this is the UP (in LDU)</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;z&gt;</TD>
	<TD>z coordinate in LDRAW (in LDU)</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;spleeper.color&gt;</TD>
	<TD>the part number and the color of the sleeper to use or "skip" if you want to skip this part during loading</TD>
</TR><TR>
	<TD CLASS="Tilte">&lt;UsePartInstead&gt;</TD>
	<TD>a part number that should be used for the saving instead of the real &lt;PartNumber&gt; because some may not exists yet in the LDraw part library</TD>
</TR>  
</TABLE>
<P>Note that the parameters can be separated by any blank character (space or tabulation) and that the two last parameters are optionnal. Moreover the order of operation (between rotation and translation) is done as follow:</P>
<UL>
	<LI><B>From BlueBrick to LDRAW:</B> add translation first, then add rotation</LI>
	<LI><B>From LDRAW to BlueBrick:</B> remove rotation first, then remove translation</LI>
</UL>

<P>Here is an example for the 12V grey curve track:</P>
<DIV CLASS="TechNote">
3241C01=11.25	-12.67	-24		13.38	767.8				;curve track (grey)
</DIV>

</BODY>
</HTML>
